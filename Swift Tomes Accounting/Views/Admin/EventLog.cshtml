@model Swift_Tomes_Accounting.Models.ViewModels.EventModel

<br />
<h2 class="text-center" style="margin-left:75px">Event Log</h2>
<div class="sidebar-container border-dark">
    <div>
        <br />
        <div class="text-center border-info">Quick Actions</div>
        <br />
    </div>

    <ul class="sidebar-navigation">
        <li>
            <a asp-controller="Admin" asp-action="Index" class="btn btn-dark btn-outline-info">Dashboard</a>
        </li>
        <li>
            <a asp-controller="Admin" asp-action="Send" class="btn btn-dark btn-outline-info">Send Message </a>
        </li>
        <li>
            <a asp-controller="UnapprovedUsers" asp-action="Index" class="btn btn-dark btn-outline-info">Pending Approval</a>
        </li>
        <li>
            <a asp-controller="User" asp-action="Index" class="btn btn-dark btn-outline-info">Users List</a>
        </li>
        <li>
            <a a asp-controller="Roles" asp-action="Index" class="btn btn-dark btn-outline-info">Roles List</a>
        </li>
        <li>
            <a asp-controller="expiredpass" asp-action="Index" class="btn btn-dark btn-outline-info">Expired Passwords List</a>
        </li>
        <li>
            <a asp-controller="Admin" asp-action="EventLog" class="btn btn-info btn-outline-light">Event Log</a>
        </li>
    </ul>
</div>



@{
    List<DateTime> eventTime = new List<DateTime>();
    foreach (var item in Model.EventUser)
    {
        eventTime.Add(item.eventTime);
    }
    foreach (var item in Model.EventAccount)
    {
        eventTime.Add(item.eventTime);
    }
    //Add both list datetimes to this list then sort
    eventTime.Sort((x, y) => DateTime.Compare(y, x));
}

<div class="p-4 border rounded" style="width: 1100px; margin-left:125px;">
    <table class="table table-striped border">
        <tr class="table-secondary">

            <th>
                Event ID
            </th>
            <th>
                Event Type
            </th>
            <th>
                Field
            </th>
            <th>
                Before
            </th>
            <th>
                After
            </th>
            <th>
                Performed By
            </th>
            <th>
                Date of Event
            </th>
        </tr>
        @foreach (var time in eventTime)
        {
            foreach (var user in Model.EventUser)
            {
                @if (time == user.eventTime)
                {
                    <tr>
                        <td style="width:100px">
                            User-@user.eventID.ToString("000")
                        </td>
                        <td>
                            @user.eventType
                        </td>
                        <td style="width:125px">
                            First Name:<br />
                            Last Name:<br />
                            Username:<br />
                            Date of Birth:<br />
                            Role:<br />
                            Is Active? <br />
                            Address:<br />

                        </td>
                        <td >
                            @user.BeforeFname<br />
                            @user.BeforeLname<br />
                            @user.BeforeuserName<br />
                            @user.BeforeDOB<br />
                            @user.BeforeRole<br />
                            @user.BeforeisActive<br />
                            @user.BeforeAddress<br />

                        </td>
                        <td>
                            @user.AfterFname<br />
                            @user.AfterLname<br />
                            @user.AfteruserName<br />
                            @user.AfterDOB<br />
                            @user.AfterRole<br />
                            @user.AfterisActive<br />
                            @user.AfterAddress<br />
                        </td>
                        <td>
                            @user.eventPerformedBy
                        </td>
                        <td>
                            @user.eventTime
                        </td>

                    </tr>

                }
            }
            foreach (var account in Model.EventAccount)
            {
                @if (time == account.eventTime)
                {
                    <tr>
                        <td>
                            Event ID
                        </td>
                        <td>
                            Event Type
                        </td>
                        <td>
                            Account Number:<br />
                            Account Name:<br />
                            Description:<br />
                            Category:<br />
                            Subcategory:<br />
                            Balance:<br />
                            Comments:<br />
                            Is Active:<br />
                            Is Contra:<br />
                        </td>
                        <td>
                            @account.BeforeAccountNumber<br />
                            @account.BeforeAccountName<br />
                            @account.BeforeDescription<br />
                            @account.BeforeCategory<br />
                            @account.BeforeSubCategory<br />
                            @account.BeforeBalance<br />
                            @account.BeforeComments<br />
                            @account.BeforeisActive<br />
                            @account.BeforeisContra<br />
                        </td>
                        <td>
                            @account.AfterAccountNumber<br />
                            @account.AfterAccountName<br />
                            @account.AfterDescription<br />
                            @account.AfterCategory<br />
                            @account.AfterSubCategory<br />
                            @account.AfterBalance<br />
                            @account.AfterComments<br />
                            @account.AfterisActive<br />
                            @account.AfterisContra<br />
                        </td>
                        <td>
                            
                        </td>
                        <td>
                            
                        </td>

                    </tr>
                }

            }
        }

    </table>
    </div>











   



    <style>
        .sidebar-container {
            position: absolute;
            width: 250px;
            height: 90%;
            left: 0;
            overflow-x: hidden;
            overflow-y: auto;
            background: #36454F;
            color: #fff;
            top: 57px;
            border-style: solid;
        }

        .content-container {
            padding-top: 20px;
        }

        .sidebar-logo {
            padding: 10px 15px 10px 30px;
            font-size: 20px;
            background-color: #2574A9;
        }

        .sidebar-navigation {
            padding: 0;
            margin: 0;
            list-style-type: none;
            position: relative;
        }

            .sidebar-navigation li {
                background-color: transparent;
                position: relative;
                display: inline-block;
                width: 100%;
                line-height: 20px;
            }

                .sidebar-navigation li a {
                    padding: 10px 15px 10px 30px;
                    display: block;
                    color: #fff;
                }

                .sidebar-navigation li .fa {
                    margin-right: 10px;
                }

                .sidebar-navigation li a:active,
                .sidebar-navigation li a:hover,
                .sidebar-navigation li a:focus {
                    text-decoration: none;
                    outline: none;
                }

                .sidebar-navigation li::before {
                    background-color: #2574A9;
                    position: absolute;
                    content: '';
                    height: 100%;
                    left: 0;
                    top: 0;
                    -webkit-transition: width 0.2s ease-in;
                    transition: width 0.2s ease-in;
                    width: 3px;
                    z-index: -1;
                }

                .sidebar-navigation li:hover::before {
                    width: 100%;
                }

            .sidebar-navigation .header {
                font-size: 12px;
                text-transform: uppercase;
                background-color: #151515;
                padding: 10px 15px 10px 30px;
            }

                .sidebar-navigation .header::before {
                    background-color: transparent;
                }

        .content-container {
            padding-left: 220px;
        }
    </style>
